<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOJOJ - 评测记录</title>
    <script>
        function loadSubmissions() {
            fetch('/api/submissions?count=' + document.getElementById('count').value + '&page=' + document.getElementById('page').value)
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('submissions-container');
                let html = `
                <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                    <tr style="background: #f5f5f5;">
                        <th style="padding: 8px; border: 1px solid #ddd;">评测ID</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">题目ID</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">结果</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">得分</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">语言</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">运行时间</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">内存</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">作者</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">提交时间</th>
                    </tr>`;

                data.forEach(sub => {
                    html += `
                    <tr>
                        <td style="padding: 8px; border: 1px solid #ddd;"><a href="/status/${sub.runid}">${sub.runid}</a></td>
                        <td style="padding: 8px; border: 1px solid #ddd;"><a href="/problemset/${sub.pid}">${sub.pid}</a></td>
                        <td style="padding: 8px; border: 1px solid #ddd;" class="status-${sub.status}">${sub.status_show}</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${sub.score}</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${sub.language}</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${sub.timems}ms</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${sub.memorykb}KB</td>
                        <td style="padding: 8px; border: 1px solid #ddd;"><a href="/user/${sub.author}">${sub.author}</a></td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${new Date(sub.time).toLocaleString()}</td>
                    </tr>`;
                });

                html += '</table>';
                container.innerHTML = html;
            })
            .catch(error => {
                console.error('加载失败:', error);
            });
        }
        window.onload = loadSubmissions;
    </script>
    <style>
        .status-0, .status-6 {
            color: #19be6b;
            font-weight: bold;
        }
        .status-1, .status-2, .status-3, .status--1 {
            color: #ed3f14;
            font-weight: bold;
        }
        .status-5, .status--2, .status--3 {
            color: #f90;
            font-weight: bold;
        }
        .status-7, .status-8 {
            color: #2d8cf0;
            font-weight: bold;
        }
    </style>    <style>
        .danger-btn {
            background-color: #dc3545;  
            color: #fff;
            border: none;
            padding: 5px 5px;
            border-radius: 5px;
            cursor: pointer;
        }        
        .danger-btn:hover {
            background-color: #c82333;  
            color: #fff;
            border: none;
            padding: 5px 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .primary-btn {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 5px 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .primary-btn {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 5px 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .primary-btn:hover {
            background-color: #0056b3;
            color: #fff;
            border: none;
            padding: 5px 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .warning-btn {
            background-color: #ffc107;
            color: #fff;
            border: none;
            padding: 5px 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .warning-btn:hover {
            background-color: #e0a800;
            color: #fff;
            border: none;
            padding: 5px 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .success-btn {
            background-color: #28a745;
            color: #fff;
            border: none;
            padding: 5px 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .success-btn:hover {
            background-color: #218838;
            color: #fff;
            border: none;
            padding: 5px 5px;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header style="background: linear-gradient(to bottom, #ebf1f6 0%,#abd3ee 50%,#89c3eb 51%,#d5ebfb 100%);height: 50px;">
        <div style="display: inline-block;line-height: 50px;"><a href="/home">主页</a></div>
        <div style="display: inline-block; margin-left: 20px;line-height: 50px;"><a href="/problemset">题目列表</a></div>
        <div style="display: inline-block; margin-left: 20px;line-height: 50px;"><a href="/submit">提交代码</a></div>
        <div style="display: inline-block; margin-left: 20px;line-height: 50px;">评测记录</div>
    </header>
    <section style="margin: 20px;">
        <h2>最新评测记录</h2>
        <div id="submissions-container">
            <p>加载中...</p>
        </div>
        <div>
            <p style="display: inline-block;">每页记录数：</p>
            <input type="number" id="count" value="10" placeholder="每页记录数" style="margin-left: 20px;">
            <p style="display: inline-block;margin-left: 20px;">页码：</p>
            <input type="number" id="page" value="1" placeholder="页码" style="margin-left: 20px;">
            <button class="primary-btn" onclick="loadSubmissions()">查询</button>
        </div>
    </section>
</body>
</html>